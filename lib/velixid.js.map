{"version":3,"sources":["webpack:///webpack/bootstrap d680e07c39a2294bce21","webpack:///./src/index.js"],"names":["openPopupCenter","url","title","w","h","dualScreenLeft","getFirstNumber","window","screenLeft","screen","left","dualScreenTop","screenTop","top","width","innerWidth","document","documentElement","clientWidth","height","innerHeight","clientHeight","newWindow","open","getSpecs","focus","i","len","arguments","length","value","VelixID","EVENTS","LOGIN","ERROR","REJECT","CANCEL","init","params","_token","token","disableButtonSetup","querySelectorAll","forEach","button","_styleButton","_addBehaviour","bind","addEventListener","e","_popup","data","close","_fireEvent","undefined","setTimeout","style","padding","background","color","font","fontFamily","fontSize","border","borderRadius","outline","cursor","dataset","onclick","_openLoginPopup","_events","login","error","reject","cancel","event","index","callback","on","push"],"mappings":"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","file":"velixid.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d680e07c39a2294bce21\n **/","function openPopupCenter(url, title, w, h) {\n  // Fixes dual-screen position\n  // Most browsers use window.screenLeft\n  // Firefox uses screen.left\n  var dualScreenLeft = getFirstNumber(window.screenLeft, screen.left),\n    dualScreenTop = getFirstNumber(window.screenTop, screen.top),\n    width = getFirstNumber(\n      window.innerWidth,\n      document.documentElement.clientWidth,\n      screen.width\n    ),\n    height = getFirstNumber(\n      window.innerHeight,\n      document.documentElement.clientHeight,\n      screen.height\n    ),\n    left = width / 2 - w / 2 + dualScreenLeft,\n    top = height / 2 - h / 2 + dualScreenTop,\n    newWindow = window.open(url, title, getSpecs());\n\n  // Puts focus on the newWindow\n  if (window.focus) {\n    newWindow.focus();\n  }\n\n  return newWindow;\n\n  function getSpecs() {\n    return (\n      \"scrollbars=yes, width=\" +\n      w +\n      \", height=\" +\n      h +\n      \", top=\" +\n      top +\n      \", left=\" +\n      left\n    );\n  }\n\n  function getFirstNumber() {\n    for (var i = 0, len = arguments.length; i < len; i++) {\n      var value = arguments[i];\n\n      if (typeof value === \"number\") {\n        return value;\n      }\n    }\n  }\n}\n\nvar VelixID = {\n  EVENTS: {\n    LOGIN: \"login\",\n    ERROR: \"error\",\n    REJECT: \"reject\",\n    CANCEL: \"cancel\"\n  },\n\n  init: function(params) {\n    this._token = params.token;\n\n    if (!params.disableButtonSetup) {\n      document.querySelectorAll(\"[data-button-type=velixid-login]\").forEach(\n        function(button) {\n          this._styleButton(button);\n          this._addBehaviour(button);\n        }.bind(this)\n      );\n    }\n\n    window.addEventListener(\n      \"message\",\n      function(e) {\n        if (this._popup && e.data.close) {\n          if (e.data.data === \"cancel\") {\n            this._popup.close();\n            this._fireEvent(\"cancel\", undefined);\n          } else {\n            setTimeout(\n              function() {\n                this._popup.close();\n              }.bind(this),\n              3000\n            );\n\n            if (e.data.data === \"rejected\") {\n              this._fireEvent(\"reject\", undefined);\n            } else {\n              this._fireEvent(\"login\", e.data);\n            }\n          }\n        }\n      }.bind(this),\n      false\n    );\n  },\n\n  _styleButton: function(button) {\n    button.style.padding = \"8px 15px\";\n    button.style.background = \"#090b23\";\n    button.style.color = \"#ffffff\";\n    button.style.font = \"#ffffff\";\n    button.style.fontFamily = \"Helvetica, Lato, Arial\";\n    button.style.fontSize = \"12px\";\n    button.style.border = \"0px solid\";\n    button.style.borderRadius = \"4px\";\n    button.style.outline = \"none\";\n    button.style.cursor = \"pointer\";\n  },\n\n  _addBehaviour: function(button) {\n    switch (button.dataset[\"buttonType\"]) {\n      case \"velixid-login\":\n        button.onclick = this._openLoginPopup.bind(this);\n        break;\n      default:\n        break;\n    }\n  },\n\n  _openLoginPopup: function() {\n    this._popup = openPopupCenter(\n      \"https://api.velix.id/popup/login/\" + this._token,\n      \"Login with Velix.ID\",\n      500,\n      500\n    );\n  },\n\n  _events: {\n    login: [],\n    error: [],\n    reject: [],\n    cancel: []\n  },\n\n  _fireEvent: function(event, data) {\n    if (this._events[event]) {\n      for (let index = 0; index < this._events[event].length; index++) {\n        let callback = this._events[event][index];\n        callback(data);\n      }\n    }\n  },\n\n  on: function(event, callback) {\n    if (this._events[event] && typeof callback === \"function\") {\n      this._events[event].push(callback);\n    }\n  }\n};\n\nexport default VelixID;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/"],"sourceRoot":""}